# Dictate-to-Clipboard - Project Context

**Project:** Portable Windows desktop app for offline speech-to-text dictation
**Status:** Documentation Complete, Implementation Pending (ready for Iteration 1)
**Platform:** .NET 8 + WPF | Whisper CLI | Offline-first

---

## Quick Start for Claude Code

### If you're starting a new session:

1. **Orientation (5 min):**
   - Read: `docs/meta/how-to-use-this-repo.md`
   - Read: `docs/overview/product-summary.md`

2. **For Implementation:**
   - Read: `docs/meta/claude-integration-guide.md` (AI-specific workflows)
   - Read: `docs/iterations/iteration-plan.md` (8-iteration roadmap)
   - Start with: `docs/iterations/iteration-01-hotkey-skeleton.md`

3. **For Understanding:**
   - Architecture: `docs/architecture/architecture-overview.md`
   - Requirements: `docs/specification/functional-requirements.md`
   - Decisions: `docs/adr/0000-index.md`

### If continuing implementation:
- Check current iteration status in `docs/iterations/`
- Review Definition of Done before proceeding
- Update traceability matrix after adding code

---

## Key Principles

**Implementation Rules:**
- ✅ Work sequentially: Iteration 1 → 2 → 3 → ... → 8
- ✅ Follow acceptance criteria exactly (no scope creep)
- ✅ Maintain traceability (UC → FR → US → Code)
- ✅ Test continuously (BDD scenarios in `docs/testing/bdd-feature-seeds.md`)
- ✅ Update docs when requirements change

**Don't:**
- ❌ Skip iterations or implement features from future iterations
- ❌ Change requirements without updating specification docs
- ❌ Modify CLI contracts without updating `docs/architecture/interface-contracts.md`
- ❌ Commit without referencing US-###, FR-###, or UC-### IDs

---

## ID System (Stable References)

| Prefix | Meaning | Example |
|--------|---------|---------|
| `UC-###` | Use Case | UC-001 (Quick dictation) |
| `FR-###` | Functional Requirement | FR-010 (Hotkey registration) |
| `NFR-###` | Non-Functional Requirement | NFR-001 (p95 latency ≤ 2.5s) |
| `ADR-####` | Architecture Decision Record | ADR-0001 (Platform: .NET + WPF) |
| `US-###` | User Story (implementation) | US-001 (Hotkey toggles state) |

**Traceability chain:**
```
UC-001 → FR-010, FR-011, ... → US-001, US-010, ... → Code modules
```

See: `docs/specification/traceability-matrix.md`

---

## Architecture at a Glance

**Core Workflow:**
```
User holds hotkey → Audio recorded → Whisper STT → Clipboard + History + Flyout
```

**Components:**
- **Presentation:** Tray app, Wizard, Settings, Dialogs, Flyout
- **Services:** HotkeyManager, AudioRecorder, ClipboardService, HistoryWriter
- **Adapters:** WhisperCLIAdapter, PostProcessorCLIAdapter
- **Core:** StateMachine, ConfigManager, Logger, SlugGenerator

**Key Constraints (from ADRs):**
- Platform: .NET 8 + WPF (ADR-0001)
- STT via CLI subprocess, not FFI (ADR-0002)
- Single data root folder (ADR-0003)
- Custom flyout, not Windows toast (ADR-0005)

---

## Implementation Roadmap

| Iteration | Focus | Effort | Status |
|-----------|-------|--------|--------|
| 1 | Hotkey & App Skeleton | 4-6h | **← START HERE** |
| 2 | Audio Recording | 4-6h | Planned |
| 3 | STT with Whisper | 6-8h | Planned |
| 4 | Clipboard + History + Flyout | 6-10h | ★ E2E Complete |
| 5 | First-Run Wizard + Repair | 8-12h | Planned |
| 6 | Settings UI | 4-6h | Planned |
| 7 | Optional Post-Processing | 4-6h | Planned |
| 8 | Stabilization + Reset | 6-10h | ★ v0.1 Release |

**Total:** ~40-60 hours

---

## Definition of Done (Every Iteration)

Before marking an iteration complete:
- [ ] All US-### acceptance criteria satisfied
- [ ] BDD scenarios tagged `@Iter-{N}` pass
- [ ] No regressions (previous iteration tests still pass)
- [ ] Logging added for state transitions and errors
- [ ] Traceability matrix updated
- [ ] Changelog entry added
- [ ] Performance metrics measured (if NFR applies)
- [ ] Commit message references US-###, FR-###, UC-###

---

## Performance Targets

| Metric | Target | When Verified |
|--------|--------|---------------|
| E2E Latency (hotkey → clipboard) | p95 ≤ 2.5s | Iteration 4, 8 |
| Flyout Display | ≤ 0.5s | Iteration 4 |
| Wizard Completion | < 2 min | Iteration 5 |
| Memory (idle) | < 150 MB | Iteration 8 |

---

## Common Tasks

**Search for a requirement:**
```bash
Grep: "FR-012" in docs/specification/functional-requirements.md
```

**Find which iteration implements a feature:**
```bash
Read: docs/specification/traceability-matrix.md
```

**Load iteration context:**
```bash
Read: docs/iterations/iteration-{N}-*.md
```

**Find BDD scenarios for testing:**
```bash
Grep: "@Iter-{N}" in docs/testing/bdd-feature-seeds.md
```

**Check architecture decision:**
```bash
Read: docs/adr/0000-index.md (index)
Read: docs/adr/000{N}-*.md (specific decision)
```

---

## When in Doubt

1. **Ambiguous acceptance criteria?**
   - Check referenced FR-### for details
   - Check ADR-#### for constraints
   - Ask user via AskUserQuestion if still unclear

2. **Missing implementation detail?**
   - Check if intentionally left flexible
   - Review ADR-#### for constraints
   - Document your decision in commit message

3. **Conflicting requirements?**
   - Check traceability matrix for priority
   - Review NFR-### for trade-off guidance
   - Flag for human review if unresolved

---

## Critical Reminders

**Before implementing:**
- Load the full iteration context (iteration file + referenced specs + ADRs)
- Understand all acceptance criteria
- Check interface contracts if working with CLI adapters

**During implementation:**
- Follow TDD approach (write failing test → implement → refactor)
- Add structured logging (key-value pairs)
- Handle errors per FR-021 (user-friendly dialogs, no crashes)

**Before committing:**
- Run BDD scenarios for current iteration
- Run all previous iteration tests (regression check)
- Update traceability matrix
- Verify DoD checklist

---

## Documentation Structure

```
/docs/
  /meta/               ← AI agent guidance (start here!)
  /overview/           ← Product summary & glossary
  /specification/      ← UC, FR, NFR, data structures
  /architecture/       ← System design, components, contracts
  /adr/                ← Architecture Decision Records
  /iterations/         ← Implementation roadmap (8 iterations)
  /testing/            ← BDD seeds, test strategy
  /changelog/          ← Version history
```

---

## For Detailed Guidance

**New Claude Code sessions:**
→ Read `docs/meta/claude-integration-guide.md` (AI workflows)
→ Read `docs/meta/iteration-execution-guide.md` (step-by-step process)

**Human developers:**
→ Start with `README.md`
→ Then `docs/meta/how-to-use-this-repo.md`

---

**Last Updated:** 2025-11-17
**Current Branch:** claude/add-cloudmd-files-01Y6TNZNHQP2sCvptAYcR3Rr
**Ready for:** Iteration 1 implementation
